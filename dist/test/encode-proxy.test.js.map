{"version":3,"file":"encode-proxy.test.js","sourceRoot":"","sources":["../../src/test/encode-proxy.test.ts"],"names":[],"mappings":"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","sourcesContent":["import 'reflect-metadata'\n\nimport { EncodeProxy } from '../buffer'\nimport { FixDefinitions } from '../dictionary/definition'\nimport { ILooseObject } from '../collections/collection'\nimport { AsciiMsgTransmitter } from '../transport/ascii/ascii-msg-transmitter'\nimport { Setup } from './env/setup'\n\nlet definitions: FixDefinitions\nlet session: AsciiMsgTransmitter\nlet proxyFactory: EncodeProxy\nlet setup: Setup = null\n\nbeforeAll(async () => {\n  setup = new Setup('session/qf-fix44.json', 'session/qf-fix44.json')\n  await setup.init()\n  definitions = setup.definitions\n  const config = setup.clientConfig\n  session = new AsciiMsgTransmitter(config)\n  proxyFactory = new EncodeProxy(definitions)\n}, 45000)\n\ntest('check wrapper will reject unknown field', () => {\n  const proxy: ILooseObject = proxyFactory.wrap('ExecutionReport')\n  expect(proxy).toBeTruthy()\n  function run (): void {\n    proxy.Unknown = 999\n  }\n  expect(run).toThrow(/no field named Unknown/)\n})\n\ntest('check wrapper will accept known field', () => {\n  const proxy: ILooseObject = proxyFactory.wrap('ExecutionReport')\n  expect(proxy).toBeTruthy()\n  function run (): void {\n    proxy.OrderID = 'ipsum'\n  }\n  run()\n  expect(proxy.OrderID).toEqual('ipsum')\n})\n\ntest('check wrapper rejects unknown enum value', () => {\n  const proxy: ILooseObject = proxyFactory.wrap('ExecutionReport')\n  expect(proxy).toBeTruthy()\n  function run (): void {\n    proxy.SettlType = '23'\n  }\n  expect(run).toThrow(/enum field SettlType does not support \"23\"/)\n})\n\ntest('check wrapper will accept known enum field', () => {\n  const proxy: ILooseObject = proxyFactory.wrap('ExecutionReport')\n  expect(proxy).toBeTruthy()\n  function run (): void {\n    proxy.SettlType = '1'\n  }\n  run()\n  expect(proxy.SettlType).toEqual('1')\n})\n\ntest('check wrapper rejects Date field when not given Date', () => {\n  const proxy: ILooseObject = proxyFactory.wrap('ExecutionReport')\n  expect(proxy).toBeTruthy()\n  function run (): void {\n    proxy.SettlDate = \"I'm not a good date\"\n  }\n  expect(run).toThrow(/expects Date but receives/)\n})\n\ntest('check wrapper will accept Date field when given Date', () => {\n  const proxy: ILooseObject = proxyFactory.wrap('ExecutionReport')\n  expect(proxy).toBeTruthy()\n  function run (): void {\n    proxy.SettlDate = new Date()\n  }\n  run()\n  expect(proxy.SettlDate).toBeTruthy()\n})\n\ntest('check wrapper rejects boolean field when not given boolean', () => {\n  const proxy: ILooseObject = proxyFactory.wrap('ExecutionReport')\n  expect(proxy).toBeTruthy()\n  function run (): void {\n    proxy.LastRptRequested = \"I'm not a good boolean\"\n  }\n  expect(run).toThrow(/expects boolean but receives/)\n})\n\ntest('check wrapper will accept boolean field when given boolean', () => {\n  const proxy: ILooseObject = proxyFactory.wrap('ExecutionReport')\n  expect(proxy).toBeTruthy()\n  function run (): void {\n    proxy.LastRptRequested = true\n  }\n  run()\n  expect(proxy.LastRptRequested).toEqual(true)\n})\n\ntest('check wrapper rejects Buffer field when not given Buffer', () => {\n  const proxy: ILooseObject = proxyFactory.wrap('ExecutionReport')\n  expect(proxy).toBeTruthy()\n  function run (): void {\n    proxy.EncodedText = \"I'm not a Buffer, don't accept me!\"\n  }\n  expect(run).toThrow(/expects Buffer but receives/)\n})\n\ntest('check wrapper will accept Buffer field when given Buffer', () => {\n  const proxy: ILooseObject = proxyFactory.wrap('ExecutionReport')\n  expect(proxy).toBeTruthy()\n  function run (): void {\n    proxy.EncodedText = new Buffer('I am a buffer.', 'utf8')\n  }\n  run()\n  expect(proxy.EncodedText).toBeTruthy()\n})\n\ntest('check wrapper rejects string field when not given string', () => {\n  const proxy: ILooseObject = proxyFactory.wrap('ExecutionReport')\n  expect(proxy).toBeTruthy()\n  function run (): void {\n    proxy.ClOrdID = 123\n  }\n  expect(run).toThrow(/expects string but receives/)\n})\n\ntest('check wrapper will accept string field when given string', () => {\n  const proxy: ILooseObject = proxyFactory.wrap('ExecutionReport')\n  expect(proxy).toBeTruthy()\n  function run (): void {\n    proxy.ClOrdID = \"I'm a great string\"\n  }\n  run()\n  expect(proxy.ClOrdID).toEqual(\"I'm a great string\")\n})\n\ntest('check wrapper rejects number field when not given number', () => {\n  const proxy: ILooseObject = proxyFactory.wrap('ExecutionReport')\n  expect(proxy).toBeTruthy()\n  function run (): void {\n    proxy.GrossTradeAmt = \"I'm no number\"\n  }\n  expect(run).toThrow(/expects number but receives/)\n})\n\ntest('check wrapper will accept number field when given number', () => {\n  const proxy: ILooseObject = proxyFactory.wrap('ExecutionReport')\n  expect(proxy).toBeTruthy()\n  function run (): void {\n    proxy.GrossTradeAmt = 12234\n  }\n  run()\n  expect(proxy.GrossTradeAmt).toEqual(12234)\n})\n\ntest('check wrapper rejects non object field when assigning component', () => {\n  const proxy: ILooseObject = proxyFactory.wrap('ExecutionReport')\n  expect(proxy).toBeTruthy()\n  function run (): void {\n    proxy.Parties = 'I should be an object, but I am sadly not'\n  }\n  expect(run).toThrow(/is a component but/)\n})\n\ntest('check wrapper accepts object field when assigning component', () => {\n  const proxy: ILooseObject = proxyFactory.wrap('ExecutionReport')\n  expect(proxy).toBeTruthy()\n  function run (): void {\n    proxy.Parties = {\n    }\n  }\n  run()\n  expect(proxy.Parties).toBeTruthy()\n})\n\ntest('check wrapper when assigned component wraps so it can be checked.', () => {\n  const proxy: ILooseObject = proxyFactory.wrap('ExecutionReport')\n  expect(proxy).toBeTruthy()\n  function run (): void {\n    proxy.YieldData = {\n    }\n  }\n  run()\n  function run2 (): void {\n    proxy.YieldData.GrossTradeAmt = 999\n  }\n    // reject this\n  expect(run2).toThrow(/no field named GrossTradeAmt/)\n  proxy.YieldData.YieldCalcDate = new Date()\n    // accept this\n  expect(proxy.YieldData).toBeTruthy()\n})\n\ntest('check wrapper when given populated component.', () => {\n  const proxy: ILooseObject = proxyFactory.wrap('ExecutionReport')\n  expect(proxy).toBeTruthy()\n  function run (): void {\n    proxy.YieldData = {\n      ClOrdID: \"I don't belong here.\"\n    }\n  }\n    // reject this\n  expect(run).toThrow(/no field named ClOrdID/)\n})\n\ntest('check wrapper accepts number for group field and wraps n elements', () => {\n  const proxy: ILooseObject = proxyFactory.wrap('ExecutionReport')\n  expect(proxy).toBeTruthy()\n  function run (): void {\n    proxy.Parties = {\n      NoPartyIDs: 2\n    }\n  }\n  run()\n  expect(proxy.Parties).toBeTruthy()\n  expect(Array.isArray(proxy.Parties.NoPartyIDs)).toEqual(true)\n  expect(proxy.Parties.NoPartyIDs.length).toEqual(2)\n    // now assign a field, this should also be wrapped\n  proxy.Parties.NoPartyIDs[0].PartyID = 'hello'\n  expect(proxy.Parties.NoPartyIDs[0].PartyID).toBeTruthy()\n  function run2 (): void {\n    proxy.Parties.NoPartyIDs[0].GrossTradeAmt = 999\n  }\n    // reject this\n  expect(run2).toThrow(/no field named GrossTradeAmt/)\n})\n\ntest('check wrapper accepts array of objects in group component', () => {\n  const proxy: ILooseObject = proxyFactory.wrap('ExecutionReport')\n  expect(proxy).toBeTruthy()\n  function run (): void {\n    proxy.Parties = {\n      NoPartyIDs: getParties()\n    }\n  }\n  run()\n  function run2 (): void {\n    proxy.Parties.NoPartyIDs[0].GrossTradeAmt = 999\n  }\n    // reject this\n  expect(run2).toThrow(/no field named GrossTradeAmt/)\n})\n\nfunction getParties (): ILooseObject {\n  return [\n    {\n      'PartyID': 'magna.',\n      'PartyIDSource': '9',\n      'PartyRole': 28,\n      'PtysSubGrp': {\n        'NoPartySubIDs': [\n          {\n            'PartySubID': 'et',\n            'PartySubIDType': 22\n          },\n          {\n            'PartySubID': 'leo,',\n            'PartySubIDType': 10\n          }\n        ]\n      }\n    },\n    {\n      'PartyID': 'iaculis',\n      'PartyIDSource': 'F',\n      'PartyRole': 2,\n      'PtysSubGrp': {\n        'NoPartySubIDs': [\n          {\n            'PartySubID': 'Nullam',\n            'PartySubIDType': 12\n          },\n          {\n            'PartySubID': 'lectus,',\n            'PartySubIDType': 13\n          },\n          {\n            'PartySubID': 'eget',\n            'PartySubIDType': 18\n          }\n        ]\n      }\n    },\n    {\n      'PartyID': 'vitae,',\n      'PartyIDSource': '9',\n      'PartyRole': 5,\n      'PtysSubGrp': {\n        'NoPartySubIDs': [\n          {\n            'PartySubID': 'ac',\n            'PartySubIDType': 6\n          }\n        ]\n      }\n    }\n  ]\n}\n"]}